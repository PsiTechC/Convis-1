redis uses an image, skipping
nginx uses an image, skipping
Building api
#0 building with "desktop-linux" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.81kB done
#1 WARN: FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 2)
#1 WARN: FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 11)
#1 WARN: FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 32)
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.11-slim
#2 ...

#3 [auth] library/python:pull token for registry-1.docker.io
#3 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.11-slim
#2 DONE 2.2s

#4 [internal] load .dockerignore
#4 transferring context: 656B 0.0s done
#4 DONE 0.0s

#5 [base 1/1] FROM docker.io/library/python:3.11-slim@sha256:8eb5fc663972b871c528fef04be4eaa9ab8ab4539a5316c4b8c133771214a617
#5 resolve docker.io/library/python:3.11-slim@sha256:8eb5fc663972b871c528fef04be4eaa9ab8ab4539a5316c4b8c133771214a617 0.0s done
#5 DONE 0.0s

#6 [production 1/6] RUN apt-get update && apt-get install -y --no-install-recommends     curl     tesseract-ocr     tesseract-ocr-eng     libgl1     libglib2.0-0     && rm -rf /var/lib/apt/lists/*
#6 CACHED

#7 [production 2/6] WORKDIR /app
#7 CACHED

#8 [internal] load build context
#8 transferring context: 1.87MB 0.1s done
#8 DONE 0.1s

#9 [builder 1/4] RUN apt-get update && apt-get install -y --no-install-recommends     build-essential     curl     tesseract-ocr     tesseract-ocr-eng     libgl1     libglib2.0-0     && rm -rf /var/lib/apt/lists/*
#9 CACHED

#10 [builder 2/4] WORKDIR /app
#10 CACHED

#11 [builder 3/4] COPY requirements.txt .
#11 CACHED

#12 [builder 4/4] RUN pip install --no-cache-dir --upgrade pip &&     pip install --no-cache-dir -r requirements.txt
#12 CACHED

#13 [production 3/6] COPY --from=builder /usr/local/lib/python3.11/site-packages /usr/local/lib/python3.11/site-packages
#13 DONE 32.8s

#14 [production 4/6] COPY --from=builder /usr/local/bin /usr/local/bin
#14 DONE 0.5s

#15 [production 5/6] COPY . .
#15 DONE 0.1s

#16 [production 6/6] RUN mkdir -p uploads/knowledge_base chroma_db logs &&     chmod -R 755 uploads chroma_db logs
#16 DONE 0.2s

#17 exporting to image
#17 exporting layers
#17 exporting layers 231.3s done
#17 exporting manifest sha256:d17224fab356b39a478e83b2e9aa7702bdeb692fe0714736286a9f4c6ae45acb done
#17 exporting config sha256:e7387cd009360e7d5cc735831ae0f5a7c55429e99f4105e3d8a6f0e58a5e1ae6 done
#17 exporting attestation manifest sha256:0ecad9023247b08ff2370ce42af45614b079cfd0e7457aeea4f02914a5783914 0.0s done
#17 exporting manifest list sha256:4d725ce0d52440ba26fb55ff32bd928f5a561b3715869d1b50080888a344ad29 done
#17 naming to docker.io/library/convis-main_api:latest done
#17 unpacking to docker.io/library/convis-main_api:latest 0.1s done
#17 DONE 231.4s

 [33m3 warnings found (use docker --debug to expand):
[0m - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 32)
 - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 2)
 - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 11)

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/s9nkv0cn9z1lfv8ottwamp9qd
Building web
#0 building with "desktop-linux" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.36kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:18-alpine
#2 ...

#3 [auth] library/node:pull token for registry-1.docker.io
#3 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:18-alpine
#2 DONE 3.8s

#4 [internal] load .dockerignore
#4 transferring context: 532B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 871.51kB 0.0s done
#5 DONE 0.1s

#6 [base 1/1] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#6 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.0s done
#6 sha256:25ff2da83641908f65c3a74d80409d6b1b62ccfaab220b9ea70b80df5a2e0549 0B / 446B 0.2s
#6 sha256:1e5a4c89cee5c0826c540ab06d4b6b491c96eda01837f430bd47f0d26702d6e3 0B / 1.26MB 0.2s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 0B / 40.01MB 0.2s
#6 sha256:f18232174bc91741fdf3da96d85011092101a032a93a388b79e99e69c2d5c870 0B / 3.64MB 0.2s
#6 sha256:25ff2da83641908f65c3a74d80409d6b1b62ccfaab220b9ea70b80df5a2e0549 446B / 446B 0.8s done
#6 sha256:1e5a4c89cee5c0826c540ab06d4b6b491c96eda01837f430bd47f0d26702d6e3 1.26MB / 1.26MB 1.2s done
#6 sha256:f18232174bc91741fdf3da96d85011092101a032a93a388b79e99e69c2d5c870 1.05MB / 3.64MB 1.5s
#6 sha256:f18232174bc91741fdf3da96d85011092101a032a93a388b79e99e69c2d5c870 3.64MB / 3.64MB 1.8s done
#6 extracting sha256:f18232174bc91741fdf3da96d85011092101a032a93a388b79e99e69c2d5c870 0.1s done
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 3.15MB / 40.01MB 2.1s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 6.29MB / 40.01MB 2.4s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 8.39MB / 40.01MB 2.6s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 11.53MB / 40.01MB 2.9s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 13.63MB / 40.01MB 3.0s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 15.73MB / 40.01MB 3.2s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 18.87MB / 40.01MB 3.5s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 20.97MB / 40.01MB 3.6s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 23.07MB / 40.01MB 3.8s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 26.21MB / 40.01MB 4.1s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 28.31MB / 40.01MB 4.2s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 30.41MB / 40.01MB 4.4s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 33.55MB / 40.01MB 4.7s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 35.65MB / 40.01MB 4.8s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 37.75MB / 40.01MB 5.0s
#6 sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 40.01MB / 40.01MB 5.2s done
#6 extracting sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e
#6 extracting sha256:dd71dde834b5c203d162902e6b8994cb2309ae049a0eabc4efea161b2b5a3d0e 0.8s done
#6 DONE 6.1s

#6 [base 1/1] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#6 extracting sha256:1e5a4c89cee5c0826c540ab06d4b6b491c96eda01837f430bd47f0d26702d6e3 0.0s done
#6 extracting sha256:25ff2da83641908f65c3a74d80409d6b1b62ccfaab220b9ea70b80df5a2e0549 0.0s done
#6 DONE 6.1s

#7 [builder 1/4] WORKDIR /app
#7 DONE 0.1s

#8 [deps 1/4] RUN apk add --no-cache libc6-compat
#8 ...

#9 [runner 2/8] RUN addgroup --system --gid 1001 nodejs
#9 DONE 0.2s

#8 [deps 1/4] RUN apk add --no-cache libc6-compat
#8 0.344 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz
#8 ...

#10 [runner 3/8] RUN adduser --system --uid 1001 nextjs
#10 DONE 0.2s

#8 [deps 1/4] RUN apk add --no-cache libc6-compat
#8 0.670 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz
#8 1.008 (1/3) Installing musl-obstack (1.2.3-r2)
#8 1.021 (2/3) Installing libucontext (1.3.2-r0)
#8 1.029 (3/3) Installing gcompat (1.1.0-r4)
#8 1.043 OK: 10 MiB in 20 packages
#8 DONE 1.1s

#11 [deps 2/4] WORKDIR /app
#11 DONE 0.0s

#12 [deps 3/4] COPY package.json package-lock.json ./
#12 DONE 0.0s

#13 [deps 4/4] RUN npm ci
#13 20.69 
#13 20.69 added 378 packages, and audited 379 packages in 20s
#13 20.69 
#13 20.69 140 packages are looking for funding
#13 20.69   run `npm fund` for details
#13 20.70 
#13 20.70 found 0 vulnerabilities
#13 20.70 npm notice
#13 20.70 npm notice New major version of npm available! 10.8.2 -> 11.6.2
#13 20.70 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
#13 20.70 npm notice To update run: npm install -g npm@11.6.2
#13 20.70 npm notice
#13 DONE 20.8s

#14 [builder 2/4] COPY --from=deps /app/node_modules ./node_modules
#14 DONE 4.3s

#15 [builder 3/4] COPY . .
#15 DONE 0.2s

#16 [builder 4/4] RUN npm run build
#16 0.596 
#16 0.596 > convis-web@0.1.0 build
#16 0.596 > next build --turbopack
#16 0.596 
#16 1.453  âš  Invalid next.config.ts options detected: 
#16 1.454  âš      Unrecognized key(s) in object: 'missingSuspenseWithCSRBailout' at "experimental"
#16 1.454  âš  See more info here: https://nextjs.org/docs/messages/invalid-next-config
#16 1.516    â–² Next.js 15.5.4 (Turbopack)
#16 1.516    - Experiments (use with caution):
#16 1.516      â¨¯ missingSuspenseWithCSRBailout
#16 1.516 
#16 1.545    Creating an optimized production build ...
#16 11.79  âœ“ Finished writing to disk in 32ms
#16 11.82  âœ“ Compiled successfully in 9.6s
#16 11.82    Skipping validation of types
#16 11.82    Skipping linting
#16 12.07    Collecting page data ...
#16 13.14    Generating static pages (0/15) ...
#16 13.76  â¨¯ useSearchParams() should be wrapped in a suspense boundary at page "/phone-numbers". Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
#16 13.76     at g (/app/.next/server/chunks/ssr/node_modules_next_dist_d22badb4._.js:4:5016)
#16 13.76     at m (/app/.next/server/chunks/ssr/node_modules_next_dist_d22badb4._.js:4:6650)
#16 13.76     at h (/app/.next/server/chunks/ssr/app_phone-numbers_page_tsx_84857907._.js:1:205)
#16 13.76     at n3 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:82831)
#16 13.76     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84601)
#16 13.76     at n5 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:104801)
#16 13.76     at n7 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:102219)
#16 13.76     at n8 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:83183)
#16 13.76     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84647)
#16 13.76     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:101560)
#16 13.76 Error occurred prerendering page "/phone-numbers". Read more: https://nextjs.org/docs/messages/prerender-error
#16 13.76 Export encountered an error on /phone-numbers/page: /phone-numbers, exiting the build.
#16 13.77  â¨¯ Next.js build worker exited with code: 1 and signal: null
#16 13.80 npm notice
#16 13.80 npm notice New major version of npm available! 10.8.2 -> 11.6.2
#16 13.80 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
#16 13.80 npm notice To update run: npm install -g npm@11.6.2
#16 13.80 npm notice
#16 ERROR: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
------
 > [builder 4/4] RUN npm run build:
13.76     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84647)
13.76     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:101560)
13.76 Error occurred prerendering page "/phone-numbers". Read more: https://nextjs.org/docs/messages/prerender-error
13.76 Export encountered an error on /phone-numbers/page: /phone-numbers, exiting the build.
13.77  â¨¯ Next.js build worker exited with code: 1 and signal: null
13.80 npm notice
13.80 npm notice New major version of npm available! 10.8.2 -> 11.6.2
13.80 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
13.80 npm notice To update run: npm install -g npm@11.6.2
13.80 npm notice
------
Dockerfile:24
--------------------
  22 |     
  23 |     # Build the application
  24 | >>> RUN npm run build
  25 |     
  26 |     # Production image, copy all the files and run next
--------------------
ERROR: failed to build: failed to solve: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/mr33lw1fed9z840j6uvd0xks1
Service 'web' failed to build : Build failed
