Building web
#0 building with "desktop-linux" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.49kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:18-alpine
#2 DONE 1.3s

#3 [internal] load .dockerignore
#3 transferring context: 532B done
#3 DONE 0.0s

#4 [base 1/1] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#4 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.0s done
#4 DONE 0.0s

#5 [runner 2/8] RUN addgroup --system --gid 1001 nodejs
#5 CACHED

#6 [builder 1/4] WORKDIR /app
#6 CACHED

#7 [runner 3/8] RUN adduser --system --uid 1001 nextjs
#7 CACHED

#8 [internal] load build context
#8 transferring context: 2.84kB done
#8 DONE 0.0s

#9 [deps 1/4] RUN apk add --no-cache libc6-compat
#9 CACHED

#10 [deps 2/4] WORKDIR /app
#10 CACHED

#11 [deps 3/4] COPY package.json package-lock.json ./
#11 CACHED

#12 [deps 4/4] RUN npm ci
#12 CACHED

#13 [builder 2/4] COPY --from=deps /app/node_modules ./node_modules
#13 CACHED

#14 [builder 3/4] COPY . .
#14 DONE 0.0s

#15 [builder 4/4] RUN NEXT_PUBLIC_API_URL=http://api:8000 npm run build --turbopack
#15 0.488 
#15 0.488 > convis-web@0.1.0 build
#15 0.488 > next build --turbopack
#15 0.488 
#15 1.332  ⚠ Invalid next.config.ts options detected: 
#15 1.332  ⚠     Unrecognized key(s) in object: 'missingSuspenseWithCSRBailout' at "experimental"
#15 1.332  ⚠ See more info here: https://nextjs.org/docs/messages/invalid-next-config
#15 1.392    ▲ Next.js 15.5.4 (Turbopack)
#15 1.392    - Experiments (use with caution):
#15 1.392      ⨯ missingSuspenseWithCSRBailout
#15 1.392 
#15 1.425    Creating an optimized production build ...
#15 11.66  ✓ Finished writing to disk in 33ms
#15 11.69  ✓ Compiled successfully in 9.6s
#15 11.70    Skipping validation of types
#15 11.70    Skipping linting
#15 11.96    Collecting page data ...
#15 13.07    Generating static pages (0/15) ...
#15 13.44 Failed to build /_error: /404 (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /_error: /500 (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /ai-agent/page: /ai-agent (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /settings/page: /settings (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /verify-email/page: /verify-email (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /phone-numbers/page: /phone-numbers (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /register/page: /register (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.44 Failed to build /favicon.ico/route: /favicon.ico (attempt 1 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.86  ⨯ useSearchParams() should be wrapped in a suspense boundary at page "/phone-numbers". Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
#15 13.86     at g (/app/.next/server/chunks/ssr/node_modules_next_dist_d22badb4._.js:4:5016)
#15 13.86     at m (/app/.next/server/chunks/ssr/node_modules_next_dist_d22badb4._.js:4:6650)
#15 13.86     at h (/app/.next/server/chunks/ssr/app_phone-numbers_page_tsx_84857907._.js:1:205)
#15 13.86     at n3 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:82831)
#15 13.86     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84601)
#15 13.86     at n5 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:104801)
#15 13.86     at n7 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:102219)
#15 13.86     at n8 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:83183)
#15 13.86     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84647)
#15 13.86     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:101560)
#15 13.86 Error occurred prerendering page "/phone-numbers". Read more: https://nextjs.org/docs/messages/prerender-error
#15 13.87    Generating static pages (3/15) 
#15 13.87    Generating static pages (7/15) 
#15 13.98 Failed to build /_error: /404 (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.98 Failed to build /_error: /500 (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.98 Failed to build /register/page: /register (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 13.98 Failed to build /ai-agent/page: /ai-agent (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 14.01    Generating static pages (11/15) 
#15 14.07 Failed to build /settings/page: /settings (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 14.07 Failed to build /verify-email/page: /verify-email (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 14.07 Failed to build /phone-numbers/page: /phone-numbers (attempt 2 of 3). Retrying again shortly.
#15 14.07 Failed to build /favicon.ico/route: /favicon.ico (attempt 2 of 3) because it took more than 0 seconds. Retrying again shortly.
#15 14.09  ⨯ useSearchParams() should be wrapped in a suspense boundary at page "/phone-numbers". Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
#15 14.09     at g (/app/.next/server/chunks/ssr/node_modules_next_dist_d22badb4._.js:4:5016)
#15 14.09     at m (/app/.next/server/chunks/ssr/node_modules_next_dist_d22badb4._.js:4:6650)
#15 14.09     at h (/app/.next/server/chunks/ssr/app_phone-numbers_page_tsx_84857907._.js:1:205)
#15 14.09     at n3 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:82831)
#15 14.09     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84601)
#15 14.09     at n5 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:104801)
#15 14.09     at n7 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:102219)
#15 14.09     at n8 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:83183)
#15 14.09     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:84647)
#15 14.09     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:101560)
#15 14.09 Error occurred prerendering page "/phone-numbers". Read more: https://nextjs.org/docs/messages/prerender-error
#15 15.29 Failed to build /_error: /404 after 3 attempts.
#15 15.29 Export encountered an error on /_error: /404, exiting the build.
#15 15.31  ⨯ Next.js build worker exited with code: 1 and signal: null
#15 15.35 npm notice
#15 15.35 npm notice New major version of npm available! 10.8.2 -> 11.6.2
#15 15.35 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
#15 15.35 npm notice To update run: npm install -g npm@11.6.2
#15 15.35 npm notice
#15 ERROR: process "/bin/sh -c NEXT_PUBLIC_API_URL=http://api:8000 npm run build --turbopack" did not complete successfully: exit code: 1
------
 > [builder 4/4] RUN NEXT_PUBLIC_API_URL=http://api:8000 npm run build --turbopack:
14.09     at n6 (/app/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.prod.js:2:101560)
14.09 Error occurred prerendering page "/phone-numbers". Read more: https://nextjs.org/docs/messages/prerender-error
15.29 Failed to build /_error: /404 after 3 attempts.
15.29 Export encountered an error on /_error: /404, exiting the build.
15.31  ⨯ Next.js build worker exited with code: 1 and signal: null
15.35 npm notice
15.35 npm notice New major version of npm available! 10.8.2 -> 11.6.2
15.35 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
15.35 npm notice To update run: npm install -g npm@11.6.2
15.35 npm notice
------
Dockerfile:26
--------------------
  24 |     # Build the application
  25 |     # Use --no-lint flag to skip linting during build
  26 | >>> RUN NEXT_PUBLIC_API_URL=http://api:8000 npm run build --turbopack
  27 |     
  28 |     # Production image, copy all the files and run next
--------------------
ERROR: failed to build: failed to solve: process "/bin/sh -c NEXT_PUBLIC_API_URL=http://api:8000 npm run build --turbopack" did not complete successfully: exit code: 1

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/i4qdg1pptj7fbb2nrsvfn8j6t
Service 'web' failed to build : Build failed
